class GradientGenerator{constructor(){this.canvas=document.getElementById("gradientCanvas"),this.ctx=this.canvas.getContext("2d"),this.animationId=null,this.time=0,this.speed=.05,this.blurIntensity=40,this.colorIntensity=.7,this.lastFrameTime=0,this.targetFPS=60,this.frameInterval=1e3/this.targetFPS,this.controlsVisible=!1,this.gradientStreaks=this.generateRandomStreaks(),this.preCalculateStaticValues(),this.init(),this.setupEventListeners(),this.setupControlToggle(),this.initializeUIState(),this.animate()}generateRandomStreaks(){const t=[[138,43,226],[75,0,130],[0,191,255],[72,61,139],[123,104,238],[0,206,209],[147,0,211],[30,144,255],[106,90,205],[0,255,255]],e=[],a=6+Math.floor(3*Math.random());for(let i=0;i<a;i++)e.push({x:Math.random(),y:Math.random(),angle:360*Math.random(),length:2+2*Math.random(),width:.8+1.5*Math.random(),color:t[Math.floor(Math.random()*t.length)],speed:.5+1*Math.random(),angleSpeed:.2+.4*Math.random(),speedFactor:0,angleSpeedFactor:0,colorCache:null});return e}preCalculateStaticValues(){this.gradientStreaks.forEach((t=>{t.speedFactor=.001*t.speed,t.angleSpeedFactor=.001*t.angleSpeed;const[e,a,i]=t.color,n=this.colorIntensity;t.colorCache={r:Math.floor(e*n),g:Math.floor(a*n),b:Math.floor(i*n),r07:Math.floor(e*n*.7),g07:Math.floor(a*n*.7),b07:Math.floor(i*n*.7),r01:Math.floor(e*n*.1),g01:Math.floor(a*n*.1),b01:Math.floor(i*n*.1)}}))}init(){this.resizeCanvas(),window.addEventListener("resize",(()=>this.resizeCanvas())),this.ctx.imageSmoothingEnabled=!0,this.ctx.imageSmoothingQuality="high"}resizeCanvas(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.preCalculateStaticValues()}setupEventListeners(){document.getElementById("speedControl").addEventListener("input",(t=>{this.speed=parseFloat(t.target.value)})),document.getElementById("blurControl").addEventListener("input",(t=>{this.blurIntensity=parseInt(t.target.value)})),document.getElementById("intensityControl").addEventListener("input",(t=>{this.colorIntensity=parseFloat(t.target.value),this.preCalculateStaticValues()})),this.canvas.addEventListener("click",(t=>{this.regenerateGradients()}))}setupControlToggle(){const t=document.getElementById("toggleButton");document.getElementById("uiContainer");t.addEventListener("click",(()=>{this.toggleControls()})),document.addEventListener("keydown",(t=>{"h"!==t.key.toLowerCase()||t.ctrlKey||t.metaKey||t.altKey||(t.preventDefault(),this.toggleControls())}))}toggleControls(){const t=document.getElementById("uiContainer");this.controlsVisible=!this.controlsVisible,this.controlsVisible?t.classList.add("visible"):t.classList.remove("visible")}render(t){const{width:e,height:a}=this.canvas;this.ctx.clearRect(0,0,e,a),this.ctx.fillStyle="#000000",this.ctx.fillRect(0,0,e,a),this.ctx.globalCompositeOperation="screen",this.ctx.filter=`blur(${this.blurIntensity}px)`;const i=Math.min(e,a),n=this.time*this.speed;for(let t=0;t<this.gradientStreaks.length;t++)this.drawOptimizedStreak(this.gradientStreaks[t],e,a,i,n);this.ctx.filter="none",this.ctx.globalCompositeOperation="source-over"}drawOptimizedStreak(t,e,a,i,n){const s=t.x*e,r=t.y*a,o=s+Math.sin(n*t.speedFactor)*e*.2,l=r+Math.cos(n*t.speedFactor*.8)*a*.2,d=.017453292519943295*(t.angle+45*Math.sin(n*t.angleSpeedFactor)),h=t.length*i*.8,c=t.width*i*.3,g=Math.cos(d),m=Math.sin(d),u=.5*h,p=o-g*u,v=l-m*u,C=o+g*u,b=l+m*u,S=this.ctx.createLinearGradient(p,v,C,b),w=t.colorCache;S.addColorStop(0,`rgba(${w.r01}, ${w.g01}, ${w.b01}, 0)`),S.addColorStop(.3,`rgba(${w.r07}, ${w.g07}, ${w.b07}, 0.4)`),S.addColorStop(.5,`rgba(${w.r}, ${w.g}, ${w.b}, 0.9)`),S.addColorStop(.7,`rgba(${w.r07}, ${w.g07}, ${w.b07}, 0.4)`),S.addColorStop(1,`rgba(${w.r01}, ${w.g01}, ${w.b01}, 0)`),this.ctx.save(),this.ctx.translate(o,l),this.ctx.rotate(d),this.ctx.beginPath(),this.ctx.ellipse(0,0,.6*h,c,0,0,6.283185307179586),this.ctx.fillStyle=S,this.ctx.fill(),this.ctx.restore()}animate(t=0){t-this.lastFrameTime>=this.frameInterval&&(this.time+=16*this.speed,this.render(t),this.lastFrameTime=t),this.animationId=requestAnimationFrame((t=>this.animate(t)))}regenerateGradients(){this.gradientStreaks=this.generateRandomStreaks(),this.preCalculateStaticValues(),this.time=0}randomizeColors(){this.regenerateGradients()}saveImage(){const t=document.createElement("a");t.download=`gradient-background-${Date.now()}.png`,t.href=this.canvas.toDataURL(),t.click()}initializeUIState(){const t=document.getElementById("uiContainer");this.controlsVisible&&t.classList.add("visible")}}function randomizeColors(){window.gradientGenerator&&window.gradientGenerator.randomizeColors()}function saveImage(){window.gradientGenerator&&window.gradientGenerator.saveImage()}window.addEventListener("DOMContentLoaded",(()=>{if(window.gradientGenerator=new GradientGenerator,window.gradientGenerator.controlsVisible){const t=document.getElementById("uiContainer");t&&t.classList.add("visible")}}));